(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{576:function(s,t,a){"use strict";a.r(t);var e=a(1),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"按条件导出数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#按条件导出数据"}},[s._v("#")]),s._v(" 按条件导出数据")]),s._v(" "),a("p",[s._v("不添加 drop表语句，create表语句")]),s._v(" "),a("p",[s._v("示例：将 tpi 库下的 browselog 表中的满足  BrowseLogID>38")]),s._v(" "),a("p",[s._v("导出语句为：")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("E:\\"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"D:\\mysql-5.7.16-winx64\\bin\\mysqldump.exe"')]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("uroot "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('--port=3308 --skip-add-drop-table --no-create-info --skip-tz-utc  tpi --tables browselog --where=" BrowseLogID>38" > E:/result.sql')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("分段分析")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("E:\\"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"D:\\mysql-5.7.16-winx64\\bin\\mysqldump.exe"')]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("uroot "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--port=3308 ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--skip-add-drop-table   // 不添加 drop 表语句")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--no-create-info       // 不添加 create 表语句")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--skip-tz-utc          // 保证 where 条件中有时间条件时，数据筛选正确")]),s._v("\ntpi                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// tpi 库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--tables browselog    // browselog 表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('--where=" BrowseLogID>38"  // 过滤条件')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" E:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("sql")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("导出的 result.sql 的内容为：")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOCK")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLES")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("browselog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WRITE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*!40000 ALTER TABLE `browselog` DISABLE KEYS */")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("browselog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SA'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MYPERIOD'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2021-12-14 10:29:02'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2021-12-14 10:29:02'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'job'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*!40000 ALTER TABLE `browselog` ENABLE KEYS */")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNLOCK")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"mysqldump-couldn-t-find-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysqldump-couldn-t-find-table"}},[s._v("#")]),s._v(' mysqldump： Couldn\'t find table: ">"')]),s._v(" "),a("p",[s._v("使用 Java 程序来执行 mysqldump 命令的时候，使用 > 可能有问题。"),a("br"),s._v("\n可能会提示 "),a("code",[s._v('mysqldump： Couldn\'t find table: ">"')]),a("br"),s._v("\n使用参数 --result-file 来替换 > 即可。")]),s._v(" "),a("p",[s._v("比如：")]),s._v(" "),a("p",[a("code",[s._v('String cmd = "mysqldump -uroot -p123456 --port=3306 --skip-add-drop-table --no-create-info --skip-tz-utc personMgr --tables menu --result-file=/home/sql/result.sql";')])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" cmd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysqldump  -uroot -p123456 --port=3306 --skip-add-drop-table   --no-create-info --skip-tz-utc  personMgr --tables menu  --result-file=/home/sql/result.sql"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("警告")]),s._v(" "),a("p",[a("strong",[s._v("where 条件中不要有空格或其它字符之类的东西，否则在 Java 执行中也会报此错误，目前还不知如何解决。")])])]),s._v(" "),a("h2",{attrs:{id:"mysqldump-can-t-create-write-to-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysqldump-can-t-create-write-to-file"}},[s._v("#")]),s._v(" mysqldump: Can't create/write to file")]),s._v(" "),a("p",[s._v("具体的错误信息为：")]),s._v(" "),a("p",[s._v('"msg": "mysqldump: [Warning] Using a password on the command line interface can be insecure.mysqldump: Can\'t create/write to file \'"/home/bigtable/resource/testwj_20211227_151356.sql"\' (OS errno 2 - No such file or directory)"')]),s._v(" "),a("p",[s._v("原因：")]),s._v(" "),a("p",[s._v('这个的原因是 --result-file="/home/sql/result.sql" ，即参数 result-file 的路径加了双引号的缘故。'),a("br"),s._v("\n因此去掉双引号即可。")]),s._v(" "),a("p",[s._v("但奇怪的是，如果不是写在程序中，加引号也是可以的，放在程序中，不知为何就报错了。")]),s._v(" "),a("h2",{attrs:{id:"参照"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参照"}},[s._v("#")]),s._v(" 参照")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/mysqldump.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://dev.mysql.com/doc/refman/8.0/en/mysqldump.html"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);